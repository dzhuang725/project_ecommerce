<!DOCTYPE html>
<html>
  <head>

      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
      <style>
          body{
              margin: 20px;
          }
          *{
              text-align: center;
          }
      </style>
  </head>
  <body>
      <h3>Products</h3>
            <table class="table table-striped" id='list'>
                <thead>
                        <td>Product Name</td>
                        <td>Product Category</td>
                        <td>Product Price</td>
                        <td>Action</td>
                </thead>
                <tbody id='products'>
                    {{#each products}}
                        <tr id={{this.id}}>
                            <td>{{this.name}}</td>
                            <td>{{this.category}} </td>
                            <td>{{this.price}} </td>
                            <td><button>Delete</button></td>
                        </tr>   
                    {{/each}}
                </tbody>
            </table>

            <hr/>

            <form id='form'>
                <div class="form-row">
                    <div class="col">
                        <input type="text" name="name" class="form-control" placeholder="Product name">
                    </div>
                    <div class="col">
                        <input type="text" name="category" class="form-control" placeholder="Product category">
                    </div>
                    <div class="col">
                        <input type="text" name="price" class="form-control" placeholder="Product price">
                    </div>
                    <div class="col">
                        <button type="submit" class="btn btn-primary" id='submit'>Submit</button>
                    </div>
                </div>
            </form>
        </div>
        <script>
            const form = document.getElementById('form')
            form.addEventListener('submit',(e)=>{
                e.preventDefault()
                const requestBody = {
                    name: form.elements['name'].value,
                    category:form.elements['category'].value,
                    price:form.elements['price'].value
                }
                fetch('http://localhost:3000/products', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(requestBody),
                })   
                //1: if response.ok is true, manipulate the dom, add one more row? 
                //2: if response.ok is true, clear the table, rerender the updated data? 
                //3: if response.ok is true, reload the page
            })

            const productsList = document.getElementById('products')
            productsList.addEventListener('click',(e)=>{
                if(e.target.tagName!='BUTTON'){
                    return
                }
                // fetch request to delete
            })
        </script>
  </body>
</html>



{{!-- <tbody id='products'>
</tbody>

<script>
    const render = (data)=>{
        // create tr&td elements (document.createElement)
        // append them to the tbody
    }
    let data;

    // fetch the initial data, set it to the data variable

    const addProduct = ()=>{
        // send the POST request
        // if the response is OK
        //      update the data variable
        //      call render 
        // else
        //      an error message / pop up window
    }
</script> --}}

